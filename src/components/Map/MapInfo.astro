---
interface Props {
	salons?: any[];
	classes?: string;
}

const {salons = [], classes = ''} = Astro.props;

import settings from '@/data/settings.json';
const { site_name, logo_map_info, logo_header, logo_dealer_header, logo_dealer_map_info } = settings;
const logo_dealer = logo_dealer_map_info || logo_dealer_header || '';

import InfoItem from '@/components/Contacts/InfoItem.astro';
const space = salons.length > 1 ? 'space-y-2' : 'space-y-4';
---

<div class={`map-info relative lg:absolute lg:max-w-md s1024_1074:left-[45px] s1280_1330:left-[45px] s1536_1586:left-[45px] py-8 px-4 lg:px-8 z-10 bg-white/70 shadow-2xl w-fit mx-auto mb-10 lg:mb-0 flex flex-col ${classes}`}>
	<div class="flex flex-col lg:flex-row justify-center lg:justify-start items-center mb-3 divide-y lg:divide-y-0 lg:divide-x">
		<div class="pb-3 lg:pb-0 lg:pr-3 col-auto">
			<img src={logo_map_info || logo_header} class="h-[var(--logo-map-info-height)] w-auto" alt={site_name} loading="lazy" width="179" height="37" />
		</div>
		<div class="pt-3 lg:pt-0 lg:pl-3">
			{logo_dealer ? (
				<img src={logo_dealer} class="h-[var(--logo-dealer-map-info-height)] w-auto" alt={site_name} loading="lazy" width="179" height="37" />
			) : (
				<span class="text-xl sm:text-2xl leading-none uppercase tracking-wider sm:tracking-normal">{site_name}</span>
			)}
		</div>
	</div>

	{salons.length > 0 && (
		<div class="divide-y grow overflow-y-auto custom-scrollbar">
			{salons.map(salon => (
				<div class={`py-4 ${space}`}>
					{salons.length > 1 && salon?.name && (<InfoItem class="w-full flex items-center gap-2" value={salon.name} iconName="mdi:bank" iconClass="text-2xl text-gray-500" />)}					
					{salon?.address && (<InfoItem class="w-full flex items-center gap-2" value={salon.address} iconName="mdi:map-marker-outline" iconClass="text-2xl text-gray-500" />)}
					{salon?.phone && (<InfoItem class="w-full flex items-center gap-2" value={salon.phone} iconName="mdi:cellphone" type="phone" iconClass="text-2xl text-gray-500" />)}
					{salons.length === 1 && salon?.work_hours && (<InfoItem class="w-full flex items-center gap-2" value={salon.work_hours} iconName="mdi:clock-time-three-outline" iconClass="text-2xl text-gray-500" />)}
				</div>
			))}
		</div>
	)}

	<div class="font-bold sm:text-xl mb-4">
		Остались вопросы? Мы&nbsp;перезвоним!
	</div>
	<a
		class="popup-link btn black max-w-[400px] w-full block"
		href="#common-modal"
		data-title="Заказать звонок"
		data-form_name="Заказ звонка. Секция Контакты"
		data-choose_department={true}
	>
		Заказать звонок
	</a>
</div>
