---
import { BASE_URL, SITE_URL, SITE_NAME, LEGAL_ENTITY, LEGAL_INN, BRAND, FOOTER_INFO, LINKS_MENU as links } from '@/const';
import { Icon } from 'astro-icon/components'
import { phoneFormat } from '@/js/utils/numbers.format';
const url = `https://alexsab.ru?utm_source=${BRAND}&utm_compaing=${SITE_NAME}`
const salons = await fetch(`${BASE_URL}${SITE_URL}/data/salons.json`).then((response) => response.json());
// import salons from '@/data/salons.json';
const path = Astro.url.pathname;
import logo from '@/components/Logo/logo.svg';
---

<footer class="bg-black/90 text-white py-14 relative">
    <div class="container">
        <div class="grid md:grid-cols-3 lg:grid-cols-4 gap-10 md:gap-5">

            <div class="">
                <a href="/" class="uppercase text-2xl inline-block mb-5 transition-opacity hover:opacity-70">{ SITE_NAME }</a>
                <div class="flex flex-wrap items-center gap-5">
                    <img src={logo.src} class="h-8 w-auto filter brightness-0 invert opacity-70" alt={SITE_NAME} />
                </div>
            </div>
            <div class="">
                <h3 class="text-xl mb-3 md:mb-5">Разделы сайта</h3>
                <ul class="space-y-2">
                {
                    links.map(link => (
                    <li><a href={path === '/' ? link.url : '/'+link.url} class={`transition hover:underline ${path === link.url ? 'font-extrabold' : ''}`}>{link.name}</a></li>
                    ))
                }
                </ul>
            </div>
            <div class="lg:col-span-2">
                <h3 class="text-xl mb-3 md:mb-5">Контакты</h3>
                <div class="grid lg:grid-cols-2 gap-8 lg:gap-5">
                {
                    salons.map(salon => (
                    <div class="flex flex-col gap-3">
                        <span class="flex items-center gap-1 flex-nowrap">
                            <Icon name="mdi:map-marker-outline" class="text-2xl" /> 
                            <Fragment set:html={salon.address} />
                        </span>
                        <a href={`tel:${phoneFormat(salon.phone)}`} class="flex items-center gap-1 flex-nowrap transition-colors hover:text-accent-500">
                            <Icon name="mdi:cellphone" class="text-xl" /> 
                            {salon.phone}
                        </a>
                    </div>
                    ))
                }
                </div>
            </div>

        </div>

        <hr class="mt-8 mb-5 opacity-20">

        <p class="text-xs opacity-60"><Fragment set:html={FOOTER_INFO} /></p>

        <hr class="mt-5 mb-8 opacity-20">

        <div class="flex items-center justify-between gap-5 flex-wrap">
            <div class="flex items-center flex-grow gap-5 flex-wrap">
                <p class="text-sm m-0">© 2024 { LEGAL_ENTITY }</p>
                {LEGAL_INN && (<p class="text-sm text-white/80">ИНН: <Fragment set:html={LEGAL_INN} /></p>)}
                <a href="/privacy-policy/" class="text-white/80 text-sm font-light leading-none hover:!text-white">Политика конфиденциальности</a>
            </div>
            <p class="made-by text-sm m-0 text-white/80">Разработка <a href={url} class="hover:!text-white" target="_blank">alexsab.ru</a></p>
        </div>

    </div>
</footer>