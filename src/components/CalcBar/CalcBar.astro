<div 
  x-cloak
  x-show="$store.calcItems.total > 0" 
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0 translate-y-4"
  x-transition:enter-end="opacity-100 translate-y-0"
  x-transition:leave="transition ease-in duration-200"
  x-transition:leave-start="opacity-100 translate-y-0"
  x-transition:leave-end="opacity-0 translate-y-4"
  class="fixed z-20 bottom-4 left-4 right-4 sm:left-1/2 sm:-translate-x-1/2 sm:w-auto sm:max-w-xl lg:max-w-2xl p-3 sm:p-4 bg-accent-500 text-white rounded-lg shadow-lg flex flex-col sm:flex-row justify-between items-center gap-3 sm:gap-6"
>
  <div class="text-center sm:text-left">
    <span class="font-medium">Итого:</span>
    <span x-text="$store.calcItems.total.toLocaleString('ru-RU') + ' ₽'" class="text-lg sm:text-xl font-bold ml-2"></span>
    <span x-text="'(' + $store.calcItems.selectedItems.length + ' услуг)'" class="text-xs sm:text-sm opacity-80 ml-1 sm:ml-2"></span>
  </div>
  <div class="flex gap-2 w-full sm:w-auto">
    <button @click="$store.calcItems.clear()" class="flex-1 sm:flex-none px-3 sm:px-4 py-1.5 text-sm bg-white/20 rounded hover:bg-white/30 transition-colors">Очистить</button>
    <a 
      href="#common-modal"
      data-title="Запись на сервис"
      x-bind:data-subtitle="'Выбрано услуг: <b>' + $store.calcItems.selectedItems.length + '</b> на сумму <b>' + $store.calcItems.total.toLocaleString('ru-RU') + ' ₽</b>'"
      x-bind:data-form_name="'Запись на сервис c выбором услуг'"
      x-bind:data-comment="'Услуги:\\n' + $store.calcItems.selectedItems.map(i => i.title + ' - ' + i.price).join(',\\n') + '.\\n\\nИтого: ' + $store.calcItems.total + ' руб.'"
      class="popup-link flex-1 sm:flex-none px-3 sm:px-4 py-1.5 text-sm bg-white text-accent-500 rounded font-medium hover:bg-gray-100 transition-colors text-center"
    >
      Оставить заявку
    </a>
  </div>
</div>
